!function(a){"use strict";a("#header").css("position","relative"),a("#footer").css("position","relative"),a("body").append('<div id="screennavi"><div><input id="screen" type="checkbox" onchange="$(\'#item_archives\').screenToggle();return false;"> <a href="" onclick="document.getElementById(\'screen\').checked=(document.getElementById(\'screen\').checked==true)?false:true;$(\'#item_archives\').screenToggle();return false;">全画面表示</a></div></div>'),a("#screennavi").css("position","fixed").css("background","#cccccc").css("padding","5px").css("bottom","0px").css("right","0px").css("z-index","2000").css("opacity","0.9").css("filter","alpha(opacity=90)");var r=0,l=[];a("#item_archives").after('<br style="clear:both;" /><div id="info" style="text-align:center;padding:5px;z-index:2000;"></div>');var c=a("#item_archives");a("#info").empty().append('<img src="img/indi.gif" alt="読み込み中..." width="10" height="10" /> 読み込み中...'),a.ajax({url:"<$mt:BlogURL$>archives_jsonp.php",dataType:"jsonp",callback:"callback",timeout:5e3}).done(function(e,i,t){l=e,c.loadItem()}).fail(function(e,i,t){a("#info").empty()}).always(function(e,i,t){}),a.fn.loadItem=function(){var e=l.items,i=e.length;if(!e)return!1;var t=a(this);t.append('<div class="view" style="opacity:0.0;" />');for(var o=t.children(".view:last"),s=r;s<i;s++)if(Object.keys(e[s]).length){if(r+50<=s)break;var c=e[s],n=c.datetime.split(" ")[0].replace(/-0/g,"-");o.append('<a href="'+c.link+'" target="_blank"><img src="'+c.thumbnail+'" width="45" height="45" class="widget-img-thumb" alt="'+n+" "+c.title+'" title="'+n+" "+c.title+'" /></a>'),s+50<i&&(c=e[s+50],a("<img />").attr("src",c.thumbnail))}r+=50,a(".widget-img-thumb:last").load(function(){o.fadeTo("normal","1.0"),a("#info").empty(),r<i&&a("#info").append('<a href="" onmouseover="$(\'#item_archives\').loadItem();return false;">さらに読み込む</a>')})};var n=!(a.fn.screenToggle=function(){1==a("#screen").is(":checked")?(c.css("position","fixed"),c.css("top","0px"),c.css("left","0px"),c.css("width","100%"),c.css("height","100%"),c.css("padding","10px"),c.css("background-color","#ffffff"),c.css("overflow","auto"),a("#info").css("position","fixed"),a("#info").css("bottom","0px"),a("#info").css("left","0px"),a("#info").css("width","100%"),a("#info").css("background-color","#ffffff"),a("#info").css("overflow","auto")):(c.css("position","static"),c.css("background-color",""),c.css("overflow","inherit"),a("#info").css("position","static"),a("#info").css("background-color",""),a("#info").css("overflow","inherit"))});a(window).scroll(function(){var e=document.documentElement.scrollHeight||document.body.scrollHeight,i=document.documentElement.scrollTop||document.body.scrollTop,t=0,o=navigator.appVersion.toLowerCase().indexOf("safari")+1?1:0,s=navigator.userAgent.toLowerCase().indexOf("opera")+1?1:0;s&&(isIE=!1),t=o||s?window.innerHeight:document.documentElement.clientHeight||document.body.clientHeight||document.body.scrollHeight,n&&i+t<e&&(n=!1),n||e<i+t+1&&(c.loadItem(),n=!0)})}(jQuery);
